<h2>Spring Boot</h2>

<form [formGroup]="form" (ngSubmit)="onSubmit()">
  <div class="form-group">
    <label for="nombre">Nombre:</label>
    <input
      type="text"
      class="form-control"
      id="nombre"
      formControlName="nombre"
      placeholder="Ingrese su nombre"
      required
    />
    <div
      *ngIf="form.get('nombre')?.invalid && form.get('nombre')?.touched"
      class="text-danger"
    >
      Nombre es obligatorio.
    </div>
  </div>

  <div class="form-group">
    <label for="correo">Correo Electrónico:</label>
    <input
      type="email"
      class="form-control"
      id="correo"
      formControlName="correo"
      aria-describedby="emailHelp"
      placeholder="Ingrese su correo"
      required
    />
    <div
      *ngIf="form.get('correo')?.invalid && form.get('correo')?.touched"
      class="text-danger"
    >
      <span *ngIf="form.get('correo')?.errors?.['required']"
        >Correo es obligatorio.</span
      >
      <span *ngIf="form.get('correo')?.errors?.['email']"
        >Ingrese un correo válido.</span
      >
    </div>
  </div>

  <div class="form-group">
    <label for="edad">Edad:</label>
    <input
      type="number"
      class="form-control"
      id="edad"
      formControlName="edad"
      placeholder="Ingrese su edad"
      required
    />
    <div
      *ngIf="form.get('edad')?.invalid && form.get('edad')?.touched"
      class="text-danger"
    >
      <span *ngIf="form.get('edad')?.errors?.['required']"
        >Edad es obligatoria.</span
      >
      <span *ngIf="form.get('edad')?.errors?.['min']"
        >La edad debe ser mayor a 0.</span
      >
    </div>
  </div>

  <button type="submit" class="btn btn-primary mt-3" [disabled]="form.invalid">
    {{ isEditing ? "Modificar usuario" : "Crear nuevo usuario" }}
  </button>
</form>

<div class="container mt-4">
  <div class="row" *ngFor="let user of users">
    <div class="col-md-12">
      <p><strong>ID:</strong> {{ user.id }}</p>
      <p><strong>Nombre:</strong> {{ user.nombre }}</p>
      <p><strong>Correo:</strong> {{ user.correo }}</p>
      <p><strong>Edad:</strong> {{ user.edad }}</p>

      <div class="d-flex gap-2 mt-2">
        <button (click)="editUser(user)" class="btn btn-warning">
          Modificar
        </button>
        <button (click)="deleteUser(user.id)" class="btn btn-danger">
          Eliminar
        </button>
      </div>
    </div>
    <hr class="mt-2" />
  </div>
</div>
